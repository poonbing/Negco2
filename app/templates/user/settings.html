<!DOCTYPE html>
<html>
  <head>
    <title>Settings</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
    <script>
      function previewProfilePicture(event) {
        const input = event.target;
        const previewImage = document.getElementById('profile_picture_preview');
        
        if (input.files && input.files[0]) {
          const reader = new FileReader();
          reader.onload = function (e) {
            previewImage.src = e.target.result;
          };
          reader.readAsDataURL(input.files[0]);
        } else {
          previewImage.src = '';
        }
      }
    </script>
    
  </head>
  <body>
    {% include "navbar.html" %}
    {% include 'sidebar.html' %}
    <div class="p-4 sm:ml-64">
      <h1 class="text-3xl font-bold mt-4">Settings</h1>
      <br />

      <form method="POST" action="{{ url_for('user.settings') }}" enctype="multipart/form-data">
        <div class="grid gap-6 mb-6 md:grid-cols-2">
          <div class="mb-6">
            <label for="profile_picture" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Profile Picture</label>
            <div class="flex items-center">
              <input type="file" name="profile_picture" accept="image/*" class="hidden" id="profile_picture_input" onchange="previewProfilePicture(event)" />
              <label for="profile_picture_input" class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-teal-600 dark:hover:bg-teal-700 dark:focus:ring-teal-800">
                Browse
              </label>
            </div>
            <img id="profile_picture_preview" class="mt-2" style="width: 200px; height: 200px;" src="{{ user.profile_picture }}" />          </div>
          
          
          
          <div>
            <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">First name</label>
            <input type="text" name="first_name" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" value="{{ user.first_name }}" />          
          </div>
          <div>
            <label for="last_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Last name</label>
            <input type="text" name="last_name" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" value="{{ user.last_name }}" />
          </div>
          <div>
            <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Phone number</label>
            <input type="text" name="phone" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" value="{{ user.phone }}"/>          
          </div>
          <div>
            <label for="gender" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Gender</label>
            <select name="gender" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500">
              <option selected>Choose a gender</option>
              <option value="male" {% if user['gender'] == 'male' %}selected{% endif %}>Male</option>
              <option value="female" {% if user['gender'] == 'female' %}selected{% endif %}>Female</option>
              <option value="other" {% if user['gender'] == 'other' %}selected{% endif %}>Others</option>
            </select>
          </div>
        </div>
        <div class="mb-6">
          <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your Email</label>
          <div class="relative mb-6">
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
              </svg>
            </div>
            <input type="email" name="email" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" value="{{ user.email }}" />          </div>
        </div>
        <div class="mb-6">
          <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
          <input type="password" name="password" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" placeholder="•••••••••"  />
        </div>
        <div class="mb-6">
          <label for="confirm_password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Confirm password</label>
          <input type="password" name="confirm_password" class="bg-gray-50 border border-teal-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-800 dark:border-teal-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500" placeholder="•••••••••"  />
        </div>
        <button type="submit" class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-teal-600 dark:hover:bg-teal-700 dark:focus:ring-teal-800">
          Submit
        </button>
      </form>

      {% if success_message %}
      <div class="bg-green-200 text-green-800 p-4 mt-4">
        {{ success_message }}
      </div>
      {% endif %}
      
      {% if error_message %}
  <div class="bg-red-200 text-red-800 p-4 mt-4">
    {{ error_message }}
  </div>
{% endif %}
    </div>
  </body>
  
</html>
