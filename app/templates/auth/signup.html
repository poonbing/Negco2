
{% extends "full_layout.html" %} {% block title %}Sign Up{% endblock %} {% block

  content %}
  
  <section class="bg-gray-50 dark:bg-gray-900">
    <div
      class="py-8 px-4 mx-auto max-w-2xl lg:py-16 items-center justify-center md:h-screen"
    >
      <div
        class="w-full bg-white rounded-lg shadow dark:border dark:bg-gray-900 dark:border-gray-900"
      >
        <div class="p-6 space-y-4 md:space-y-6 sm:p-8 bg">
          <div class="text-center">
            <a
              href="{{ url_for('main.index') }}"
              class="flex mb-6 text-2xl font-semibold text-gray-900 dark:text-white"
            >
              <ion-icon
                class="text-3xl text-teal-700 pr-2"
                name="planet-outline"
              ></ion-icon>
              NEG'CO
            </a>
          <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
            <h1
              class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"
            >
                    Create an account
            </h1>
			                    {% with messages = get_flashed_messages() %} {% if messages %}
        <ul class="messages">
          {% for message in messages %}
          <p class="text-red-500">{{ message }}</p>
          {% endfor %}
        </ul>
        {% endif %} {% endwith %}
            <form method="POST" action="{{ url_for('auth.signup') }}">
              {{ form.csrf_token }}
  
              <div class="grid grid-cols-2 gap-5">
                {{form.first_name(class="block p-2.5 w-full text-sm text-gray-900
                bg-gray-50 rounded-lg border border-gray-300
                focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                dark:focus:ring-primary-500 dark:focus:border-primary-500",
                placeholder="First Name")}} {{form.last_name(class="block p-2.5
                w-full text-sm text-gray-900 bg-gray-50 rounded-lg border
                border-gray-300 focus:ring-primary-500 focus:border-primary-500
                dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400
                dark:text-white dark:focus:ring-primary-500
                dark:focus:border-primary-500", placeholder="Last Name")}}
              </div>
  
              <div class="grid grid-cols-9 gap-5 mt-6">
                <div class="col-span-5">

                  {% for error in form.username.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                  {{form.username(class="block p-2.5 w-full text-sm text-gray-900
                  bg-gray-50 rounded-lg border border-gray-300
                  focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                  dark:focus:ring-primary-500 dark:focus:border-primary-500",
                  placeholder="Username")}}
                </div>
                <div class="col-span-4">
                  {{form.gender(class="block p-2.5 w-full text-sm text-gray-900
                  bg-gray-50 rounded-lg border border-gray-300
                  focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                  dark:focus:ring-primary-500 dark:focus:border-primary-500",
                  placeholder="Gender")}}
                </div>
              </div>
  
              <div class="mt-6">

                {% for error in form.email.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                {{form.email(class="bg-gray-50 border border-gray-300
                text-gray-900 text-sm rounded-lg focus:ring-primary-600
                focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                dark:focus:ring-primary-500 dark:focus:border-primary-500",
                placeholder="Email")}}
              </div>
              <div class="mt-6">

                {% for error in form.password.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                {{form.password(class="block p-2.5 w-full text-sm text-gray-900
                bg-gray-50 rounded-lg border border-gray-300
                focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                dark:focus:ring-primary-500 dark:focus:border-primary-500",
                placeholder="Password")}}
				
				                
				
              </div>
              <div class="mt-6">

                {% for error in form.confirm_password.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                {{form.confirm_password(class="block p-2.5 w-full text-sm
                text-gray-900 bg-gray-50 rounded-lg border border-gray-300
                focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                dark:focus:ring-primary-500 dark:focus:border-primary-500",
                placeholder="Confirm Password")}}
              </div>
  
              <div class="grid grid-cols-3 gap-5 mt-6">

                {% for error in form.age.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                <div class="col-span-1">
                  {{form.age(class="block p-2.5 w-full text-sm text-gray-900
                  bg-gray-50 rounded-lg border border-gray-300
                  focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                  dark:focus:ring-primary-500 dark:focus:border-primary-500",
                  placeholder="Age")}}
                </div>
                <div class="col-span-2">

                  {% for error in form.phone.errors %}
                <span class="text-red-400">{{ error }}</span>
            {% endfor %}

                  {{form.phone(class="block p-2.5 w-full text-sm text-gray-900
                  bg-gray-50 rounded-lg border border-gray-300
                  focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700
                  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                  dark:focus:ring-primary-500 dark:focus:border-primary-500",
                  placeholder = "Phone")}}
                </div>
              </div>
  
              <div class="mt-6">
                <input type="checkbox" class="border border-gray-400" />
                <span>
                  I accept the
                  <a href="#" class="text-teal-600 font-semibold">Terms of Use</a>
                  &
                  <a href="#" class="text-teal-600 font-semibold"
                    >Privacy Policy</a
                  >
                </span>
              </div>
              <div class="mt-6">
                <button
                  type="submit"
                  class="w-full bg-teal-600 py-3 text-center text-white"
                >
                  Sign up
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
    document.querySelector("form").addEventListener("submit", function(event) {
        let errorMessages = [];

        // First Name Validation
        const firstName = document.querySelector("[name='first_name']").value;
        if (!firstName || firstName.length < 5 || firstName.length > 49) {
            errorMessages.push("First Name should be between 5 to 49 characters.");
        }

        // Last Name Validation
        const lastName = document.querySelector("[name='last_name']").value;
        if (!lastName || lastName.length < 5 || lastName.length > 49) {
            errorMessages.push("Last Name should be between 5 to 49 characters.");
        }

        // Username Validation
        const username = document.querySelector("[name='username']").value;
        const usernamePattern = /^[a-zA-Z0-9_-]{5,49}$/;
        if (!usernamePattern.test(username)) {
            errorMessages.push("Invalid username format. Only letters, numbers, underscores, and hyphens are allowed.");
        }

        // Email Validation
        const email = document.querySelector("[name='email']").value;
        const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        if (!emailPattern.test(email)) {
            errorMessages.push("Invalid email format.");
        }

        // Password Validation
        const password = document.querySelector("[name='password']").value;
        const passwordError = validatePassword(password);
        if (passwordError) {
            errorMessages.push(passwordError);
        }

        // Confirm Password Validation
        const confirmPassword = document.querySelector("[name='confirm_password']").value;
        if (confirmPassword !== password) {
            errorMessages.push("Passwords do not match.");
        }

        // Age Validation
        const age = document.querySelector("[name='age']").value;
        if (isNaN(age) || age < 0 || age > 200) {
            errorMessages.push("Age must be between 0 and 200.");
        }

        // Phone Validation
        const phone = document.querySelector("[name='phone']").value;
        const phonePattern = /^\d{8}$/;
        if (!phonePattern.test(phone)) {
            errorMessages.push("Phone number must be exactly eight digits.");
        }

        // If any error messages were added to the array, prevent submission
        if (errorMessages.length > 0) {
            event.preventDefault();
            alert(errorMessages.join("\n"));
        }

    });
    
    // Password Validation Function (same as provided in the earlier message)
    function validatePassword(password) {
        const lengthError = password.length < 8;
        const digitError = !/\d/.test(password);
        const uppercaseError = !/[A-Z]/.test(password);
        const lowercaseError = !/[a-z]/.test(password);
        const symbolError = !/[ !#$%&'()*+,-./[\]\\^_`{|}~"]/.test(password);
        
        if (lengthError || digitError || uppercaseError || lowercaseError || symbolError) {
            return "Password must be at least 8 characters long and contain at least one digit, one uppercase letter, one lowercase letter, and one symbol.";
        }
        return null;
    }
});
  </script>
  {% endblock %}